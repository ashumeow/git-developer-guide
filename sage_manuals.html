<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The Sage Manuals &mdash; Sage Developer&#39;s Guide v1.0</title>
    
    <link rel="stylesheet" href="_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Sage Developer&#39;s Guide v1.0" href="index.html" />
    <link rel="next" title="Git Background" href="git_background.html" />
    <link rel="prev" title="Doctesting the Sage Library" href="doctesting.html" />
    <link rel="icon" href="_static/sageicon.png" type="image/x-icon" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="git_background.html" title="Git Background"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="doctesting.html" title="Doctesting the Sage Library"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="index.html">Developer&#39;s Guide v1.0</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="the-sage-manuals">
<span id="chapter-sage-manuals"></span><h1>The Sage Manuals<a class="headerlink" href="#the-sage-manuals" title="Permalink to this headline">¶</a></h1>
<p>This chapter describes how to modify the Sage manuals. Sage&#8217;s manuals
are written in ReST, otherwise known as <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a>. To edit
them, you just need to edit the appropriate file. The documentation
builder is called <a class="reference external" href="http://sphinx.pocoo.org">Sphinx</a>.</p>
<p>Here is a list of the Sage manuals and the corresponding files to edit:</p>
<ul class="simple">
<li>The Sage tutorial: <tt class="docutils literal"><span class="pre">SAGE_ROOT/src/doc/en/tutorial</span></tt></li>
<li>The Sage developer&#8217;s guide:
<tt class="docutils literal"><span class="pre">SAGE_ROOT/src/doc/en/developer</span></tt></li>
<li>Constructions in Sage:
<tt class="docutils literal"><span class="pre">SAGE_ROOT/src/doc/en/constructions</span></tt></li>
<li>The Sage installation guide:
<tt class="docutils literal"><span class="pre">SAGE_ROOT/src/doc/en/installation</span></tt></li>
<li>The Sage reference manual: some of this is contained in the file
<tt class="docutils literal"><span class="pre">SAGE_ROOT/src/doc/en/reference</span></tt>, but most of it is
automatically generated from the Sage source code.</li>
<li>Additional, more specialized  manuals can be found under
<tt class="docutils literal"><span class="pre">SAGE_ROOT/src/doc/en</span></tt> as well.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can edit manuals that have been translated into another language
by replacing the <tt class="docutils literal"><span class="pre">en/</span></tt> above with the appropriate two letter
language code.  For example, the French tutorial is located in
<tt class="docutils literal"><span class="pre">SAGE_ROOT/src/doc/fr/tutorial</span></tt></p>
</div>
<div class="section" id="editing-the-manuals">
<h2>Editing the Manuals<a class="headerlink" href="#editing-the-manuals" title="Permalink to this headline">¶</a></h2>
<p>If, for example, you want to change the Sage tutorial, then you should
start by modifying the files in
<tt class="docutils literal"><span class="pre">SAGE_ROOT/src/doc/en/tutorial/</span></tt>. Then to build a PDF file
with your changes, type:</p>
<div class="highlight-python"><pre>sage --docbuild tutorial pdf</pre>
</div>
<p>You will get a file <tt class="docutils literal"><span class="pre">tutorial.pdf</span></tt> in
<tt class="docutils literal"><span class="pre">SAGE_ROOT/src/doc/output/pdf/en/tutorial</span></tt> which you should
inspect.  You can build the HTML version of the tutorial by typing:</p>
<div class="highlight-python"><pre>sage --docbuild tutorial html</pre>
</div>
<p>Once you have done this, you can access the new HTML version from the
notebook interface to Sage by clicking the <tt class="docutils literal"><span class="pre">Help</span></tt> link, or you can
open the file
<tt class="docutils literal"><span class="pre">SAGE_ROOT/src/doc/output/html/en/tutorial/index.html</span></tt> in
your web browser.  For more detailed information about building the
documentation, see <a class="reference internal" href="#section-building-manuals"><em>Building the manuals</em></a>.</p>
<p>You should also run:</p>
<div class="highlight-python"><pre>sage -tp SAGE_ROOT/src/doc/en/tutorial/</pre>
</div>
<p>to test all of the examples in the tutorial, see
<a class="reference internal" href="coding_basics.html#chapter-testing"><em>Running automated tests</em></a> for more details.</p>
<p>As noted above, the reference manual is mostly autogenerated from Sage
source code.  To build it, type:</p>
<div class="highlight-python"><pre>sage -b &lt;repo-name&gt;
sage --docbuild reference &lt;format&gt;</pre>
</div>
<p>where <tt class="docutils literal"><span class="pre">&lt;repo-name&gt;</span></tt> is the name of the repository you are using, and
<tt class="docutils literal"><span class="pre">&lt;format&gt;</span></tt> is <tt class="docutils literal"><span class="pre">html</span></tt>, <tt class="docutils literal"><span class="pre">pdf</span></tt>, or any other supported format (as listed
when you run <tt class="docutils literal"><span class="pre">sage</span> <span class="pre">--docbuild</span> <span class="pre">--formats</span></tt>).</p>
</div>
<div class="section" id="hyperlinks">
<span id="chapter-sage-manuals-links"></span><h2>Hyperlinks<a class="headerlink" href="#hyperlinks" title="Permalink to this headline">¶</a></h2>
<p>You can link to doctstings of modules, classes, methods. In addition,
you can link web pages like trac tickets and Wikipedia. For full
documentation, refer to <a class="reference external" href="http://sphinx.pocoo.org/markup/inline.html">inline markup</a> in the Sphinx
documentation. Currently, there is no support for defining chapters
and labels in the autogenerated documentation. However, it is possible
to generate a link to the documentation for any module, class, method,
function, etc. The syntax is</p>
<div class="highlight-python"><pre>:role:`title &lt;target&gt;`</pre>
</div>
<p>or</p>
<div class="highlight-python"><pre>:role:`target`</pre>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">role</span></tt> is the kind of thing you want to link to (i.e. <tt class="docutils literal"><span class="pre">mod</span></tt> for
module, <tt class="docutils literal"><span class="pre">class</span></tt> for classes, <tt class="docutils literal"><span class="pre">meth</span></tt> for methods, <tt class="docutils literal"><span class="pre">func</span></tt> for
functions, etc;</li>
<li><tt class="docutils literal"><span class="pre">target</span></tt> is the Python name of the object (class, module, method,
etc.) which carries the documentation to be linked to;</li>
<li><tt class="docutils literal"><span class="pre">title</span></tt> is the name of the link as shown in the browser.</li>
</ul>
<p>If you do not provide any title then target will be used. For example,
to link to the <tt class="docutils literal"><span class="pre">dyck_word</span></tt> module, you would use
<tt class="docutils literal"><span class="pre">:mod:`sage.combinat.dyck_word`</span></tt> or if you prefer <tt class="docutils literal"><span class="pre">:mod:`Dyck</span>
<span class="pre">words&lt;sage.combinat.dyck_word&gt;`</span></tt>. Note that, in the first case, the
full qualified Python address is used which is usually too long. You
can prefix it with a <tt class="docutils literal"><span class="pre">&quot;~&quot;</span></tt> to get only the final name. For example,
in the huge link:</p>
<div class="highlight-python"><pre>:meth:`~sage.combinat.non_decreasing_parking_function.NonDecreasingParkingFunction.to_dyck_word`</pre>
</div>
<p>only <tt class="docutils literal"><span class="pre">&quot;.to_dyck_word()&quot;</span></tt> will appear. Note that the parentheses in
the link are autogenerated.</p>
<p>Local names are handled. That is, for example, in the definition of a
class (and any of its members or methods), you can link to any member
or method of the same class by simply giving the name of it prepended
by a dot <tt class="docutils literal"><span class="pre">&quot;.&quot;</span></tt>. You do not need to give its full address. For
example:</p>
<div class="highlight-python"><pre>:meth:`.to_dyck_word`</pre>
</div>
<p>sets up a link to the <tt class="docutils literal"><span class="pre">.to_dyck_word()</span></tt> method of the current class
if it exists. If not, the documentation builder searches by going up
in the class/module hierarchy of Python until it finds an object with
this name or reaches the top-level module without finding it. If the
name cannot be found, the title is typeset in boldface without any
link produced and also without any error or warning. Note that without
the prepended dot, the object is searched starting from the top-level
to the innermost module or class.</p>
<p>You can also link, without giving the full path, to objects imported
in a local module or imported by default in Sage. For example, the two
following are equivalent, as <tt class="xref py py-class docutils literal"><span class="pre">Parent</span></tt> is imported by default in
Sage (using the <tt class="docutils literal"><span class="pre">all.py</span></tt> files):</p>
<div class="highlight-python"><pre>:class:`Parent`
:class:`~sage.structure.parent.Parent`</pre>
</div>
<p>Sage adds a special role to link to trac ticket. The code
<tt class="docutils literal"><span class="pre">:trac:`12490`</span></tt> link to the <a class="reference external" href="http://trac.sagemath.org/12490">trac ticket #12490</a>. When fixing a bug, you
should add the link to the corresponding trac ticket in the <tt class="docutils literal"><span class="pre">TEST</span></tt>
section. Here is an example:</p>
<div class="highlight-python"><pre>TEST:

We check for :trac:`5534`::

    sage: w = ["a", "b", "c", "d"]; ww = ["b", "d"]
    sage: x = sage.combinat.subword.smallest_positions(w, ww); ww
    ['b', 'd']</pre>
</div>
<p>In the same vein, you can also add external links of various kinds:</p>
<ul class="simple">
<li>Wikipedia: <tt class="docutils literal"><span class="pre">:wikipedia:`Sage_(mathematics_software)`</span></tt> adds the
link <a class="reference external" href="http://en.wikipedia.org/wiki/Sage_(mathematics_software)">Wikipedia article Sage_(mathematics_software)</a>.</li>
<li>Arxiv: <tt class="docutils literal"><span class="pre">:arxiv:`1202.1506`</span></tt> adds the link <a class="reference external" href="http://arxiv.org/abs/1202.1506">Arxiv 1202.1506</a>.</li>
<li>On-Line Encyclopedia of Integer Sequences: <tt class="docutils literal"><span class="pre">:oeis:`A000081`</span></tt> adds
the link <a class="reference external" href="http://oeis.org/A000081">OEIS sequence A000081</a>.</li>
<li>Digital Object Identifier: <tt class="docutils literal"><span class="pre">:doi:`10.2752/175303708X390473`</span></tt> adds
the link <a class="reference external" href="http://dx.doi.org/10.2752/175303708X390473">doi:10.2752/175303708X390473</a>.</li>
<li>MathSciNet: <tt class="docutils literal"><span class="pre">:mathscinet:`MR0100971`</span></tt> adds the link
<a class="reference external" href="http://www.ams.org/mathscinet-getitem?mr=MR0100971">MathSciNet MR0100971</a>.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Finally, you can check that all links are properly resolved by
adding the argument <tt class="docutils literal"><span class="pre">--warn-links</span></tt> to the documentation build
command as in:</p>
<div class="highlight-python"><pre>sage -docbuild --warn-links reference html</pre>
</div>
<p class="last">In this case, when a link is not resolved Sphinx will issue a
warning.</p>
</div>
</div>
<div class="section" id="adding-a-new-file">
<h2>Adding a New File<a class="headerlink" href="#adding-a-new-file" title="Permalink to this headline">¶</a></h2>
<p>If you write a new file, say, <tt class="docutils literal"><span class="pre">sage/combinat/family.py</span></tt>, and you
want your documentation to be added to the standard documentation, you
have to add your file to the relevant <tt class="docutils literal"><span class="pre">index.rst</span></tt> file usually
located in the tree:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">SAGE_ROOT</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">doc</span><span class="o">/</span><span class="n">en</span><span class="o">/</span><span class="n">reference</span>
</pre></div>
</div>
<p>For this example, you would need to add to the file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">SAGE_ROOT</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">doc</span><span class="o">/</span><span class="n">en</span><span class="o">/</span><span class="n">reference</span><span class="o">/</span><span class="n">combinat</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">rst</span>
</pre></div>
</div>
<p>the following line:</p>
<div class="highlight-python"><pre> Combinatorics
 =============

 .. toctree::
    :maxdepth: 2

    ../sage/combinat/combinat
        [...]
    ../sage/combinat/dyck_word
+   ../sage/combinat/family
    ../sage/combinat/finite_class
        [...]</pre>
</div>
</div>
<div class="section" id="building-the-manuals">
<span id="section-building-manuals"></span><h2>Building the manuals<a class="headerlink" href="#building-the-manuals" title="Permalink to this headline">¶</a></h2>
<p>All of the Sage manuals are built using the <tt class="docutils literal"><span class="pre">sage</span> <span class="pre">--docbuild</span></tt>
script.  The content of the <tt class="docutils literal"><span class="pre">sage</span> <span class="pre">--docbuild</span></tt> script is defined in
<tt class="docutils literal"><span class="pre">SAGE_ROOT/src/doc/common/builder.py</span></tt>.  It is a thin wrapper around
the <tt class="docutils literal"><span class="pre">sphinx-build</span></tt> script which does all of the real work.  It is
designed to be a replacement for the default Makefiles generated by
the <tt class="docutils literal"><span class="pre">sphinx-quickstart</span></tt> script.  The general form of the command
is:</p>
<div class="highlight-python"><pre>sage --docbuild &lt;document-name&gt; &lt;format&gt;</pre>
</div>
<p>as explained below. For more information, there are two help commands
which give plenty of documentation for the <tt class="docutils literal"><span class="pre">sage</span> <span class="pre">--docbuild</span></tt>
script:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sage</span> <span class="o">--</span><span class="n">docbuild</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>(or <tt class="docutils literal"><span class="pre">-h</span></tt>) gives a basic listing of options and further
help commands, while:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sage</span> <span class="o">--</span><span class="n">docbuild</span> <span class="o">--</span><span class="n">help</span><span class="o">-</span><span class="nb">all</span>
</pre></div>
</div>
<p>(or <tt class="docutils literal"><span class="pre">-H</span></tt>) shows a somewhat more comprehensive help message.</p>
<div class="section" id="document-names">
<h3>Document names<a class="headerlink" href="#document-names" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">&lt;document-name&gt;</span></tt> has the form:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">lang</span><span class="o">/</span><span class="n">name</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">lang</span></tt> is a two-letter language code, and <tt class="docutils literal"><span class="pre">name</span></tt> is the
descriptive name of the document.  If the language is not specified,
then it defaults to English (<tt class="docutils literal"><span class="pre">en</span></tt>).  The following two commands do
the exact same thing:</p>
<div class="highlight-python"><pre>sage --docbuild tutorial html
sage --docbuild en/tutorial html</pre>
</div>
<p>To specify the French version of the tutorial, you would simply run:</p>
<div class="highlight-python"><pre>sage --docbuild fr/tutorial html</pre>
</div>
</div>
<div class="section" id="output-formats">
<h3>Output Formats<a class="headerlink" href="#output-formats" title="Permalink to this headline">¶</a></h3>
<p>The Sage documentation build system currently supports all of the
output formats that Sphinx does. For more detailed information, see
the documentation on builders at <a class="reference external" href="http://sphinx.pocoo.org/builders.html">http://sphinx.pocoo.org/builders.html</a>
.</p>
</div>
</div>
<div class="section" id="syntax-highlighting-cython-code">
<h2>Syntax Highlighting Cython Code<a class="headerlink" href="#syntax-highlighting-cython-code" title="Permalink to this headline">¶</a></h2>
<p>If you need to put <a class="reference internal" href="coding_in_cython.html#chapter-cython"><em>Cython</em></a> code in a ReST file,
you can either precede the code block by <tt class="docutils literal"><span class="pre">..</span> <span class="pre">code-block::</span> <span class="pre">cython</span></tt> instead
of the usual <tt class="docutils literal"><span class="pre">::</span></tt> if you want to highlight one block of code in Cython,
or you can use <tt class="docutils literal"><span class="pre">..</span> <span class="pre">highlight::</span> <span class="pre">cython</span></tt> for a whole file.</p>
<p>The following example was generated by <tt class="docutils literal"><span class="pre">..</span> <span class="pre">code-block::</span> <span class="pre">cython</span></tt>:</p>
<div class="highlight-cython"><div class="highlight"><pre><span class="k">cdef</span> <span class="kr">extern</span> <span class="k">from</span> <span class="s">&quot;descrobject.h&quot;</span><span class="p">:</span>
    <span class="k">ctypedef</span> <span class="k">struct</span> <span class="nc">PyMethodDef</span><span class="p">:</span>
        <span class="n">void</span> <span class="o">*</span><span class="n">ml_meth</span>
    <span class="k">ctypedef</span> <span class="k">struct</span> <span class="nc">PyMethodDescrObject</span><span class="p">:</span>
        <span class="n">PyMethodDef</span> <span class="o">*</span><span class="n">d_method</span>
    <span class="n">void</span><span class="o">*</span> <span class="n">PyCFunction_GET_FUNCTION</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
    <span class="n">bint</span> <span class="n">PyCFunction_Check</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">The Sage Manuals</a><ul>
<li><a class="reference internal" href="#editing-the-manuals">Editing the Manuals</a></li>
<li><a class="reference internal" href="#hyperlinks">Hyperlinks</a></li>
<li><a class="reference internal" href="#adding-a-new-file">Adding a New File</a></li>
<li><a class="reference internal" href="#building-the-manuals">Building the manuals</a><ul>
<li><a class="reference internal" href="#document-names">Document names</a></li>
<li><a class="reference internal" href="#output-formats">Output Formats</a></li>
</ul>
</li>
<li><a class="reference internal" href="#syntax-highlighting-cython-code">Syntax Highlighting Cython Code</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="doctesting.html"
                                  title="previous chapter">Doctesting the Sage Library</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="git_background.html"
                                  title="next chapter">Git Background</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/sage_manuals.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <!-- The shading of the "Go" button should be consistent -->
                <!-- with the colour of the header and footer. See the file -->
                <!-- doc/common/themes/sage/theme.conf for colours used by -->
                <!-- the Sage theme. -->
                <input type="submit" style="background-color: #B8B9F6" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="git_background.html" title="Git Background"
             >next</a> |</li>
        <li class="right" >
          <a href="doctesting.html" title="Doctesting the Sage Library"
             >previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="index.html">Developer&#39;s Guide v1.0</a> &raquo;</li>
 
      </ul>
    </div>
    
    <div class="footer">
        &copy; Copyright 2013, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b3.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;  
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');
    
    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });
    
    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();
    
    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };
    
    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });
    
    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
  </body>
</html>